# **************************************************************************** #
#                                                                              #
#                                                         :::      ::::::::    #
#    telnet.expect                                      :+:      :+:    :+:    #
#                                                     +:+ +:+         +:+      #
#    By: heleneherin <heleneherin@student.42.fr>    +#+  +:+       +#+         #
#                                                 +#+#+#+#+#+   +#+            #
#    Created: 2021/04/28 13:04:49 by heleneherin       #+#    #+#              #
#    Updated: 2021/04/28 17:01:12 by heleneherin      ###   ########.fr        #
#                                                                              #
# **************************************************************************** #

#!/usr/bin/expect -f

set timeout -1

set args [lrange $argv 0 end]

set fd [open "request_input"]
set requestLine [split [read $fd] "\n"]
close $fd

spawn telnet {*}$args
    expect ".\r"
sleep 2
foreach req $requestLine {
    send -- "$req\n\r"  
    sleep 1
}
    expect eof